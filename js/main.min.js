$(document).ready(function(){d(),c();var e=1,t="hard",a=[1,2,3,4,5,6,7,8,9],o=[],s=[],l=[[1,4,7],[2,5,8],[3,6,9],[1,2,3],[4,5,6],[7,8,9],[1,5,9],[3,5,7]];function n(e,t){if(t.push(e),a=a.filter(function(t){if(t!==e)return t}),t.length>=3){var o=!1;return r(e).forEach(function(e){var a=0;e.forEach(function(e){-1!==t.indexOf(e)&&a++}),3===a?o=!0:o||(a=0)}),o}}function r(e){return l.map(function(t){if(-1!==t.indexOf(e))return t}).filter(function(e){if(void 0!==e)return e})}function i(){$("td").text(""),$("td").removeClass("avoid-clicks"),e=1,$(".currentPlayer").text("Vez de: ( X )"),a=[1,2,3,4,5,6,7,8,9],o=[],s=[],$(".modal-winner").hasClass("show")&&$(".modal-winner").modal("hide")}function d(){null!==localStorage.getItem("scoreplayer1")?($(".storage").removeClass("hide").addClass("show"),$(".nostorage").removeClass("show").addClass("hide"),$(".score-player1").text(localStorage.getItem("scoreplayer1")),$(".score-player2").text(localStorage.getItem("scoreplayer2"))):($(".storage").removeClass("show").addClass("hide"),$(".nostorage").removeClass("hide").addClass("show"))}function c(){t="hard"}$("td").click(function(l){2===e&&"mp"!==t&&l.preventDefault(),""===$(this).text()&&$(this).animate({opacity:.4},200,function(){$(this).text(1===e?"X":"O"),$(this).addClass("avoid-clicks")}).animate({opacity:1},200).promise().done(function(){var i=n(parseInt($(this).attr("id"),10),1===e?o:s);if(i){$(".modal-winner .modal-title").text((1===e?"( X )":"( O )")+" venceu!      Modo: "+("hard"===t?"Impossível":"easy"===t?"Fácil":"Multiplayer")),$(".modal-winner").modal("show");var c=localStorage.getItem("scoreplayer"+e);null!==c?(c=parseInt(c,10),c++,localStorage.setItem("scoreplayer"+e,c.toString())):(localStorage.setItem("scoreplayer"+e,"1"),localStorage.setItem("scoreplayer"+(1===e?"2":"1"),"0")),d()}else 0===a.length?($(".modal-winner .modal-title").text("Deu Velha!"),$(".modal-winner").modal("show")):1===e?(e=2,$(".currentPlayer").text("Vez de: ( O )")):(e=1,$(".currentPlayer").text("Vez de: ( X )"));l.isTrigger||i||"mp"===t||function(){var e,l;"easy"===t?e=a[Math.floor(Math.random()*a.length)]:"hard"===t&&(-1===o.indexOf(5)&&-1===s.indexOf(5)?e=5:1===o.length?e=1===(e=Math.floor(4*Math.random())+1)?1:2===e?3:3===e?7:9:(n=!1,r(s[s.length-1]).forEach(function(e){var t=0;e.forEach(function(e){-1!==s.indexOf(e)&&t++,-1!==o.indexOf(e)&&t--}),2==t&&(n=!0)}),n?(l=s[s.length-1],r(l).forEach(function(t){t.forEach(function(t){-1!==a.indexOf(t)&&(e=t)})})):(l=o[o.length-1],r(l).forEach(function(t){var s=0;t.forEach(function(e){-1!==o.indexOf(e)&&s++}),2==s&&t.forEach(function(t){-1===o.indexOf(t)&&-1!==a.indexOf(t)&&(e=t)})}))),void 0===e&&(e=a[Math.floor(Math.random()*a.length)]));var n;$("td#"+e).trigger("click")}()})}),$(".btn.btn-primary").click(function(){i()}),$("#mode").change(c()),$("#mobile-toggle-mp").click(function(e){$("#mobile-toggle-mp").hasClass("disabled")&&i(),$("#mobile-toggle-ia").addClass("disabled").removeClass("btn-success").addClass("btn-default"),$(this).addClass("btn-success").removeClass("btn-default").removeClass("disabled"),t="mp"}),$("#mobile-toggle-ia").click(function(e){i(),$("#mobile-toggle-mp").hasClass("disabled")?"hard"===(t=$(this).attr("mode"))?($(this).attr("mode","easy"),$(this).text("Fácil"),t="easy"):($(this).attr("mode","hard"),$(this).text("Impossível"),t="hard"):($("#mobile-toggle-mp").addClass("disabled").removeClass("btn-success").addClass("btn-default"),$(this).addClass("btn-success").removeClass("btn-default").removeClass("disabled"))})});